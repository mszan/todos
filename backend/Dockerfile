FROM node:lts-alpine

WORKDIR /app

ENV PATH /app/node_modules/.bin:$PATH

ARG TODOS_ACCESS_TOKEN_SECRET
ENV ACCESS_TOKEN_SECRET=$TODOS_ACCESS_TOKEN_SECRET

ARG TODOS_REFRESH_TOKEN_SECRET
ENV REFRESH_TOKEN_SECRET=$TODOS_REFRESH_TOKEN_SECRET

ARG TODOS_MYSQL_ROOT_PASSWORD
ENV MYSQL_ROOT_PASSWORD=$TODOS_MYSQL_ROOT_PASSWORD

COPY package.json /app/

RUN npm install

COPY ./ /app/